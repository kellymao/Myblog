---
layout: post
title: "Go语言结构体（struct）"
date: 2019-08-30 
description: "Go语言结构体（struct）"
tag: GO语言
---   
  

本篇文章介绍Go语言结构体（struct）

### 结构体定义

##### 1. 结构体的定义格式

使用结构体可以表示一个包含 X 和 Y 整型分量的点结构，代码如下：

	type Point struct {
		X int
		Y int
	}
	
##### 2. 同类型的变量在一行的定义格式

颜色的红、绿、蓝 3 个分量可以使用 byte 类型表示，定义的颜色结构体如下：
	
	type Color struct {
		R, G, B byte
	}
	
结构体的定义只是一种内存布局的描述，只有当结构体实例化时，才会真正地分配内存。

##### 3. 不可导出的变量不能被其他包所引用

	package p
	type T struct{ a，b int }       // a 和 b 都是不可导出的，私有的变量

	package q
	import "p"
	var _ = p.T{a: 1, b: 2}         //编译错误，无法引用 a、b
	var _ = p.T{l, 2}               //编译错误，无法引用 a、b

虽然上面的最后一行代码没有显式地提到不可导出变量，但是它们被隐式地引用了，所以这也是不允许的。


### 结构体初始化


##### 1. 使用键值对填充结构体的例子


	type People struct {
		name  string
		child *People
	}
	
	relation := &People{
		name: "爷爷",
		child: &People{
			name: "爸爸",
			child: &People{
					name: "我",
			},
		},
	}
	
##### 匿名结构体的初始化

在本例中，使用匿名结构体的方式定义和初始化一个消息结构，这个消息结构具有消息标示部分（ID）和数据部分（data）。打印消息内容的 printMsg() 函数在接收匿名结构体时需要在参数上重新定义匿名结构体，代码如下：

	package main
	
	import (
		"fmt"
	)
	
	// 打印消息类型, 传入匿名结构体
	func printMsgType(msg *struct {
		id   int
		data string
	}) {
	
		// 使用动词%T打印msg的类型
		fmt.Printf("%T\n", msg)
	}
	
	func main() {
	
		// 实例化一个匿名结构体
		msg := &struct {  // 定义部分
			id   int
			data string
		}{  // 值初始化部分
			1024,
			"hello",
		}
	
		printMsgType(msg)
	}
